<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>osx下编译dylib的知识记录</title>
   <meta name="author" content="shuaizki" />
   <!--link href="http://feeds.feedburner.com/tom-preston-werner" rel="alternate" title="Tom Preston-Werner" type="application/atom+xml" /-->
   <meta name="readability-verification" content="QCzSs992GxmRYRKVpPeZ6LE2tS8aYKxsSSQKV8YM"/>

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>

<!-- ClickTale Top part -->
<script type="text/javascript">
var WRInitTime=(new Date()).getTime();
</script>
<!-- ClickTale end of Top part -->

<div class="site">
  <div class="title">
    <a href="/">shuaizki</a>
    <a class="extra" href="/">home</a>
  </div>
  
  <div id="post">
<p>上午开个大半个上午的会<br/>
下午本想针对要做的事儿写出个初步的模型来，结果光是环境就折腾了大半天，万恶的移植
遇到的问题主要有：</p>

<ul>
<li>g++中的-std指令中用到的几个参数有什么不同？发现std::stoi这个函数还有std::to_string()这个函数是不存在的，跟那些参数有关吗？还是跟平台有关？<br/>
是不同的c++标准，i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1的stdlib里没提供这两个函数，暂时不想研究</li>
<li><p>osx中的g++的库文件跟linux有什么不同，发现找了半天没找到的一个so文件被我改成dylib文件就成了，还有其他不同的地方吗？<br/>
找到了<a href="http://docstore.mik.ua/orelly/unix3/mac/ch05_03.htm">一篇不错的文</a>，虽然有点一知半解，大致了解了linux体系中的二进制文件采用的是ELF格式，而mac中采用的是Match-O格式。在elf格式中，shared libraries 和 loadable module是一样的。但是在Match-O体系中，这两个东西是有着严格区别的。<br/>
前者用otool显示出来的类型是DYLIB，后缀是dylib，只能静态链接，如果用dyld API的话可以动态加载。  * 后者叫做bundles，虽然mac推荐用.bundle的后缀，无奈linux党太强大了，还是缀以了so。在mac中bundle只能动态加载和反加载（也要用dyld），不能链接。
然后就是一大堆例子了。。。感觉mac下的东西很难用的样子。</p></li>
<li><p>还有就是boost的具体功能是什么，与stl的异同在哪里？另外就是几个不明所以的库，libev和libevent？估计查查manual就可以了
boost 就是一组功能性的程序库，广泛采用template实现，也许这是跟stl唯一的相同点吧。。。</p>

<blockquote><p>libev是Marc Lehmann用C写的高性能事件循环库。通过libev，可以灵活地把各种事件组织管理起来，如：时钟、io、信号等。libev在业界内也是广受好评，不少项目都采用它来做底层的事件循环。
libevent是一个异步事件处理软件函式库，以BSD许可证发布。<br/>
libevent提供了一组应用程序编程接口（API），让程式设计师可以设定某些事件发生时所执行的函式，也就是说，libevent可以用来取代网络服务器所使用的事件循环检查框架。<br/>
由于可以省去对网络的处理，且拥有不错的效能，有些软件使用libevent作为网络底层的函式库，如：memcached、Tor。</p></blockquote></li>
</ul>


<hr />

<p> 好吧，模型的事儿就明早折腾吧，最基础的设施刚刚搭建起来，还不确定能不能用......</p>

</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>10 Aug 2013</span> &raquo; <a href="/2013/08/10/finish_p4g.html">与P4G一起的六个月</a></li>
    
      <li><span>09 Jul 2013</span> &raquo; <a href="/2013/07/09/tired.html">不在状态</a></li>
    
      <li><span>06 Jul 2013</span> &raquo; <a href="/2013/07/06/java_enum_singleton_and_reflection_attack.html">java enum singleton and related safe problems</a></li>
    
  </ul>
</div>
  
  <div class="footer">
    <div class="contact">
      <p>
        Shuaizki<br />
        shuaizki@gmail.com
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="http://github.com/shuaizki/">github.com/shuaizki</a><br />
        <!--a href="http://twitter.com/mojombo/">twitter.com/mojombo</a><br /-->
        <!--a href="http://flickr.com/photos/mojombo/">flickr.com/photos/mojombo</a-->
      </p>
    </div>
    <!--div class="rss">
      <a href="http://feeds.feedburner.com/tom-preston-werner">
        <img src="/images/rss.png" alt="Subscribe to RSS Feed" />
      </a>
    </div-->
  </div>
</div>

<!--a href="http://github.com/mojombo"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a -->

<!-- ClickTale Bottom part -->
<div id="ClickTaleDiv" style="display: none;"></div>
<script type="text/javascript">
if(document.location.protocol!='https:')
  document.write(unescape("%3Cscript%20src='http://s.clicktale.net/WRb.js'%20type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
if(typeof ClickTale=='function') ClickTale(206,0.3,"www03");
</script>
<!-- ClickTale end of Bottom part -->

<!-- Google Analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-6016902-1");
pageTracker._trackPageview();
</script>
<!-- Google Analytics end -->

</body>
</html>
